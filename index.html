<html>
  <head>
    <meta charset="utf-8">
    <style>
      body{
	  background:#ccc;
      }
      #my-img{
	  image-rendering:pixelated;
      }
      #my-canv{
	  border:1px solid blue;
      }
    </style>
  </head>
  <body>
    <img id="my-img" src="marioAll.png"/>
    <canvas id="my-canv" width="256px" height="240px"></canvas>

    <script>
      var w = 16;
      var h = 16;
      var ww = w*2;
      var hh = h*2;
      let f = 1;
      let c = 0;

      var cnv = document.getElementById("my-canv");
      var ctx = cnv.getContext("2d");
      var img = document.getElementById("my-img");

      function draw(){
	  ctx.imageSmoothingEnabled = false;		  
	  ctx.scale(-1,1);
	  ctx.drawImage(img, w*f, 0, w, h, -52, 20, ww, hh);
	  ctx.scale(-1,1);

	  c++;
	  if (c > 4) {
	    f++;
	    c = 0;
	  }
	  if (f > 3) {
	    f = 1;
	  }
      }
      function animation() {
	  ctx.clearRect(0, 0, cnv.width, cnv.height);
	  draw();
	  requestAnimationFrame(animation);
      }
      animation();
    </script>
  </body>
</html>
