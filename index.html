<html>
  <head>
    <meta charset="utf-8">
    <title>bross man</title>
    <style>
      body{
	  background:#ccc;
	  touch-action:none;
      }
      #my-img{
	  image-rendering:pixelated;
      }
      #my-canv{
	  border:1px solid black;
	  width:100%;
	  height:auto;
	  image-rendering:pixelated;
      }
      .but{
	-webkit-user-select:none;
	-moz-user-select:none;
	-ms-user-select:none;
	-khtml-user-select:none;
      }
    </style>
  </head>
  <body>
    <button class="but" id="iz">izquierda</button>
    <button class="but" id="de">derecha</button>
	  <!--<img id="my-img" src="marioAll.png"/>-->
    <canvas id="my-canv" width="256px" height="240px"></canvas>

    <script>
      var movIz, movDe;
      var w = 16;
      var h = 16;
      let f = 1;
      let c = 0;
      var x = 20;

      var cnv = document.getElementById("my-canv");
      var ctx = cnv.getContext("2d");
      var img = new Image();
      img.src = "marioAll.png";

      function draw(){
	  ctx.imageSmoothingEnabled = false;		  
	  //ctx.scale(-1,1);
	  ctx.drawImage(img, w*f, 0, w, h, x, 20, w, h);
	  //ctx.scale(-1,1);

	  c++;
	  if (c > 4) {
	    f++;
	    c = 0;
	  }
	  if (f > 3) {
	    f = 1;
	  }
	  if (movDe){x++;}
	  if (movIz){x--;}
      }
      function animation() {
	  ctx.clearRect(0, 0, cnv.width, cnv.height);
	  draw();
	  requestAnimationFrame(animation);
      }
      animation();
      //eventos botones
      var btnIz = document.getElementById("iz");
      var btnDe = document.getElementById("de");
      btnIz.addEventListener("touchstart", function (e) {movIz=true;}, false);
      btnIz.addEventListener("touchend", function (e) {movIz=false;}, false);
      btnDe.addEventListener("touchstart", function (e) {movDe=true;}, false);
      btnDe.addEventListener("touchend", function (e) {movDe=false;}, false);
    </script>
  </body>
</html>
